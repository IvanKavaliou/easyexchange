/*C4*/SET SCHEMA PUBLIC
DISCONNECT
/*C5*/SET SCHEMA PUBLIC
DISCONNECT
/*C6*/SET SCHEMA PUBLIC
set schema PUBLIC
DROP TABLE users IF EXISTS
DROP TABLE accounts IF EXISTS
DROP TABLE transactions IF EXISTS
DROP SEQUENCE global_seq IF EXISTS
CREATE SEQUENCE global_seq AS INTEGER START WITH 100000
CREATE TABLE users (\u000d\u000a                       id_user INTEGER GENERATED BY DEFAULT AS SEQUENCE global_seq PRIMARY KEY,\u000d\u000a                       email VARCHAR(100) NOT NULL,\u000d\u000a                       password VARCHAR(20) NOT NULL,\u000d\u000a                       registred TIMESTAMP DEFAULT  now()\u000d\u000a)
INSERT INTO USERS VALUES(100000,'user@user.com','user','2020-06-03 16:53:24.059000')
INSERT INTO USERS VALUES(100001,'user2@user.com','user2','2020-06-03 16:53:24.059000')
ALTER SEQUENCE PUBLIC.GLOBAL_SEQ RESTART WITH 100002
COMMIT
CREATE TABLE accounts (\u000d\u000a                          id_account INTEGER GENERATED BY DEFAULT AS SEQUENCE global_seq PRIMARY KEY,\u000d\u000a                          id_user INTEGER NOT NULL,\u000d\u000a                          currency VARCHAR(3) NOT NULL,\u000d\u000a                          value DECIMAL NOT NULL\u000d\u000a)
INSERT INTO ACCOUNTS VALUES(100002,100000,'USD',200)
INSERT INTO ACCOUNTS VALUES(100003,100000,'EUR',530)
INSERT INTO ACCOUNTS VALUES(100004,100001,'USD',100)
ALTER SEQUENCE PUBLIC.GLOBAL_SEQ RESTART WITH 100005
COMMIT
CREATE TABLE transactions (\u000d\u000a                              id_transaction INTEGER GENERATED BY DEFAULT AS SEQUENCE global_seq PRIMARY KEY,\u000d\u000a                              id_account INTEGER NOT NULL,\u000d\u000a                              transaction_type VARCHAR(20) NOT NULL,\u000d\u000a                              value DECIMAL NOT NULL,\u000d\u000a                              date TIMESTAMP DEFAULT  now()\u000d\u000a)
INSERT INTO TRANSACTIONS VALUES(100005,100002,'TOP_UP',200,'2020-06-03 16:53:24.186000')
INSERT INTO TRANSACTIONS VALUES(100006,100003,'TOP_UP',530,'2020-06-03 16:53:24.186000')
INSERT INTO TRANSACTIONS VALUES(100007,100004,'TOP_UP',100,'2020-06-03 16:53:24.186000')
ALTER SEQUENCE PUBLIC.GLOBAL_SEQ RESTART WITH 100008
COMMIT
/*C7*/SET SCHEMA PUBLIC
DISCONNECT
/*C10*/SET SCHEMA PUBLIC
DISCONNECT
/*C9*/SET SCHEMA PUBLIC
DISCONNECT
/*C8*/SET SCHEMA PUBLIC
DISCONNECT
/*C6*/DROP TABLE users IF EXISTS
DROP TABLE accounts IF EXISTS
DROP TABLE transactions IF EXISTS
DROP SEQUENCE global_seq IF EXISTS
CREATE SEQUENCE global_seq AS INTEGER START WITH 100000
CREATE TABLE users (\u000d\u000a                       id_user INTEGER GENERATED BY DEFAULT AS SEQUENCE global_seq PRIMARY KEY,\u000d\u000a                       email VARCHAR(100) NOT NULL,\u000d\u000a                       password VARCHAR(20) NOT NULL,\u000d\u000a                       registred TIMESTAMP DEFAULT  now()\u000d\u000a)
INSERT INTO USERS VALUES(100000,'user@user.com','user','2020-06-03 16:58:15.153000')
INSERT INTO USERS VALUES(100001,'user2@user.com','user2','2020-06-03 16:58:15.153000')
ALTER SEQUENCE PUBLIC.GLOBAL_SEQ RESTART WITH 100002
COMMIT
CREATE TABLE accounts (\u000d\u000a                          id_account INTEGER GENERATED BY DEFAULT AS SEQUENCE global_seq PRIMARY KEY,\u000d\u000a                          id_user INTEGER NOT NULL,\u000d\u000a                          currency VARCHAR(3) NOT NULL,\u000d\u000a                          value DECIMAL NOT NULL,\u000d\u000a                          FOREIGN KEY ( id_user ) REFERENCES users ( id_user ) ON DELETE CASCADE\u000d\u000a\u000d\u000a)
INSERT INTO ACCOUNTS VALUES(100002,100000,'USD',200)
INSERT INTO ACCOUNTS VALUES(100003,100000,'EUR',530)
INSERT INTO ACCOUNTS VALUES(100004,100001,'USD',100)
ALTER SEQUENCE PUBLIC.GLOBAL_SEQ RESTART WITH 100005
COMMIT
CREATE TABLE transactions (\u000d\u000a                              id_transaction INTEGER GENERATED BY DEFAULT AS SEQUENCE global_seq PRIMARY KEY,\u000d\u000a                              id_account INTEGER NOT NULL,\u000d\u000a                              transaction_type VARCHAR(20) NOT NULL,\u000d\u000a                              value DECIMAL NOT NULL,\u000d\u000a                              date TIMESTAMP DEFAULT  now(),\u000d\u000a                              FOREIGN KEY ( id_account ) REFERENCES accounts ( id_account ) ON DELETE CASCADE\u000d\u000a)
INSERT INTO TRANSACTIONS VALUES(100005,100002,'TOP_UP',200,'2020-06-03 16:58:15.234000')
INSERT INTO TRANSACTIONS VALUES(100006,100003,'TOP_UP',530,'2020-06-03 16:58:15.234000')
INSERT INTO TRANSACTIONS VALUES(100007,100004,'TOP_UP',100,'2020-06-03 16:58:15.234000')
ALTER SEQUENCE PUBLIC.GLOBAL_SEQ RESTART WITH 100008
COMMIT
/*C11*/SET SCHEMA PUBLIC
DISCONNECT
/*C12*/SET SCHEMA PUBLIC
DISCONNECT
/*C13*/SET SCHEMA PUBLIC
DISCONNECT
